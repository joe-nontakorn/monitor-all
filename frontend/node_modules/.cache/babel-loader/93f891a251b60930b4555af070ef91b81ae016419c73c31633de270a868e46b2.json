{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/NontakornKhanaphol/Documents/Nontakorn-joe/Dev/Git-Hub/cctv-ping/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/NontakornKhanaphol/Documents/Nontakorn-joe/Dev/Git-Hub/cctv-ping/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/NontakornKhanaphol/Documents/Nontakorn-joe/Dev/Git-Hub/cctv-ping/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import Table1 from\"../components/cctv1\";import Table2 from\"../components/cctv2\";import Table3 from\"../components/cctv3\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),apiData=_useState2[0],setApiData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),webSocketData=_useState4[0],setWebSocketData=_useState4[1];console.log(process.env.REACT_APP_HOST);// Fetch API data\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(process.env.REACT_APP_HOST+\"/api/ping/check-cctv\");case 3:response=_context.sent;setApiData(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching data:\",_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();var intervalId=setInterval(fetchData,2000);return function(){return clearInterval(intervalId);};},[]);// Connect to WebSocket server\nuseEffect(function(){var ws=new WebSocket(\"ws://localhost:4000\");console.log(\"WebSocket :\",ws);ws.onclose=function(){console.log(\"WebSocket connection closed\");};ws.onopen=function(){console.log(\"WebSocket connection opened\");};if(ws.readyState===WebSocket.CLOSED){console.log(\"WebSocket connection closed before it was established\");}return function(){ws.close();};},[]);useEffect(function(){var handleMessage=function handleMessage(event){var data=JSON.parse(event.data);setWebSocketData(data);// console.log('set :',data)\n};if(webSocketData){var ws=new WebSocket(\"ws://localhost:4000\");ws.onmessage=handleMessage;return function(){ws.close();};}},[webSocketData]);function YourComponent(){var currentDate=new Date();// const thaiOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n// const thaiDate = currentDate.toLocaleDateString('th-TH', thaiOptions);\nvar options={day:\"2-digit\",month:\"2-digit\",year:\"numeric\"};var formattedDate=currentDate.toLocaleDateString(\"th-TH\",options);var timeOptions={hour:\"2-digit\",minute:\"2-digit\"};var formattedTime=currentDate.toLocaleTimeString(\"th-TH\",timeOptions);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:formattedDate}),/*#__PURE__*/_jsx(\"h2\",{children:formattedTime})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"table-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"img-container\",children:/*#__PURE__*/_jsx(\"img\",{src:require(\"../assets/jastel.jpg\"),alt:\"Jastel Logo\"})}),/*#__PURE__*/_jsxs(\"h2\",{className:\"date\",children:[\" \",/*#__PURE__*/_jsx(YourComponent,{}),\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Jastel CCVT Monitor\"}),/*#__PURE__*/_jsx(Table1,{apiData:apiData}),/*#__PURE__*/_jsx(Table2,{apiData:apiData}),/*#__PURE__*/_jsx(Table3,{apiData2:apiData})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","Table1","Table2","Table3","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","apiData","setApiData","_useState3","_useState4","webSocketData","setWebSocketData","console","log","process","env","REACT_APP_HOST","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","data","t0","error","stop","apply","arguments","intervalId","setInterval","clearInterval","ws","WebSocket","onclose","onopen","readyState","CLOSED","close","handleMessage","event","JSON","parse","onmessage","YourComponent","currentDate","Date","options","day","month","year","formattedDate","toLocaleDateString","timeOptions","hour","minute","formattedTime","toLocaleTimeString","children","className","src","require","alt","apiData2"],"sources":["C:/Users/NontakornKhanaphol/Documents/Nontakorn-joe/Dev/Git-Hub/cctv-ping/frontend/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Table1 from \"../components/cctv1\";\r\nimport Table2 from \"../components/cctv2\";\r\nimport Table3 from \"../components/cctv3\";\r\n\r\nconst App = () => {\r\n  const [apiData, setApiData] = useState(null);\r\n  const [webSocketData, setWebSocketData] = useState(null);\r\n\r\n  console.log(process.env.REACT_APP_HOST);\r\n\r\n  // Fetch API data\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          process.env.REACT_APP_HOST + \"/api/ping/check-cctv\"\r\n        );\r\n        setApiData(response.data);\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    const intervalId = setInterval(fetchData, 2000);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  // Connect to WebSocket server\r\n  useEffect(() => {\r\n    const ws = new WebSocket(\"ws://localhost:4000\");\r\n\r\n    console.log(\"WebSocket :\", ws);\r\n\r\n    ws.onclose = () => {\r\n      console.log(\"WebSocket connection closed\");\r\n    };\r\n\r\n    ws.onopen = () => {\r\n      console.log(\"WebSocket connection opened\");\r\n    };\r\n\r\n    if (ws.readyState === WebSocket.CLOSED) {\r\n      console.log(\"WebSocket connection closed before it was established\");\r\n    }\r\n\r\n    return () => {\r\n      ws.close();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleMessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      setWebSocketData(data);\r\n      // console.log('set :',data)\r\n    };\r\n\r\n    if (webSocketData) {\r\n      const ws = new WebSocket(\"ws://localhost:4000\");\r\n      ws.onmessage = handleMessage;\r\n\r\n      return () => {\r\n        ws.close();\r\n      };\r\n    }\r\n  }, [webSocketData]);\r\n\r\n  function YourComponent() {\r\n    const currentDate = new Date();\r\n    // const thaiOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\r\n    // const thaiDate = currentDate.toLocaleDateString('th-TH', thaiOptions);\r\n    const options = { day: \"2-digit\", month: \"2-digit\", year: \"numeric\" };\r\n    const formattedDate = currentDate.toLocaleDateString(\"th-TH\", options);\r\n\r\n    const timeOptions = { hour: \"2-digit\", minute: \"2-digit\" };\r\n    const formattedTime = currentDate.toLocaleTimeString(\"th-TH\", timeOptions);\r\n\r\n    return (\r\n      <div>\r\n        <h1>{formattedDate}</h1>\r\n        <h2>{formattedTime}</h2>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"table-container\">\r\n      <div className=\"img-container\">\r\n        <img src={require(\"../assets/jastel.jpg\")} alt=\"Jastel Logo\" />\r\n      </div>\r\n      <h2 className=\"date\">\r\n        {\" \"}\r\n        <YourComponent />{\" \"}\r\n      </h2>\r\n      <br></br>\r\n      <br></br>\r\n      <br></br>\r\n      <br></br>\r\n\r\n      <h1 className=\"title\">Jastel CCVT Monitor</h1>\r\n\r\n      <Table1 apiData={apiData} />\r\n      <Table2 apiData={apiData} />\r\n      <Table3 apiData2={apiData} />\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}