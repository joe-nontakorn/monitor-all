{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\NontakornKhanaphol\\\\Documents\\\\Nontakorn-joe\\\\Dev\\\\test-frontend\\\\src\\\\pages\\\\Home.js\",\n  _s = $RefreshSig$();\n/* eslint-disable no-unused-vars */\n\nimport React, { useState, useEffect } from \"react\";\nimport Monitor1 from \"../components/cctv1\";\nimport Monitor2 from \"../components/cctv2\";\nimport Monitor3 from \"../components/cctv3\";\n\n// import \"./assets/monitor1.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [webSocketData, setWebSocketData] = useState(null);\n  // Connect to WebSocket server\n  useEffect(() => {\n    const ws = new WebSocket(\"ws://localhost:3100\");\n    console.log(\"WebSocket :\", ws);\n    ws.onclose = () => {\n      console.log(\"WebSocket connection closed\");\n    };\n    ws.onopen = () => {\n      console.log(\"WebSocket connection opened\");\n    };\n    if (ws.readyState === WebSocket.CLOSED) {\n      console.log(\"WebSocket connection closed before it was established\");\n    }\n    return () => {\n      ws.close();\n    };\n  }, []);\n  useEffect(() => {\n    const fetchData1 = () => {\n      // Implement your logic to fetch data here\n      console.log(\"Fetching data from server...\");\n    };\n    const intervalId = setInterval(fetchData1, 2000);\n    return () => clearInterval(intervalId);\n  }, []);\n\n  // useEffect(() => {\n  //   const refreshPage = () => {\n  //     window.location.reload();\n  //   };\n\n  //   const timeoutId = setTimeout(refreshPage, 30000);\n\n  //   return () => clearTimeout(timeoutId);\n  // }, []);\n\n  useEffect(() => {\n    const handleMessage = event => {\n      const data = JSON.parse(event.data);\n      setWebSocketData(data);\n      // console.log('set :',data)\n    };\n\n    if (webSocketData) {\n      const ws = new WebSocket(\"ws://localhost:3100\");\n      ws.onmessage = handleMessage;\n      return () => {\n        ws.close();\n      };\n    }\n  }, [webSocketData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(Monitor1, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Monitor2, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Monitor3, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"xvQjqs10l4nnZwZswdHIDvFD30c=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Monitor1","Monitor2","Monitor3","jsxDEV","_jsxDEV","App","_s","webSocketData","setWebSocketData","ws","WebSocket","console","log","onclose","onopen","readyState","CLOSED","close","fetchData1","intervalId","setInterval","clearInterval","handleMessage","event","data","JSON","parse","onmessage","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/NontakornKhanaphol/Documents/Nontakorn-joe/Dev/test-frontend/src/pages/Home.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nimport Monitor1 from \"../components/cctv1\";\r\nimport Monitor2 from \"../components/cctv2\";\r\n\r\nimport Monitor3 from \"../components/cctv3\";\r\n\r\n// import \"./assets/monitor1.css\";\r\n\r\n\r\nfunction App() {\r\n  const [webSocketData, setWebSocketData] = useState(null);\r\n  // Connect to WebSocket server\r\n  useEffect(() => {\r\n    const ws = new WebSocket(\"ws://localhost:3100\");\r\n\r\n    console.log(\"WebSocket :\", ws);\r\n\r\n    ws.onclose = () => {\r\n      console.log(\"WebSocket connection closed\");\r\n    };\r\n\r\n    ws.onopen = () => {\r\n      console.log(\"WebSocket connection opened\");\r\n    };\r\n\r\n    if (ws.readyState === WebSocket.CLOSED) {\r\n      console.log(\"WebSocket connection closed before it was established\");\r\n    }\r\n\r\n    return () => {\r\n      ws.close();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchData1 = () => {\r\n      // Implement your logic to fetch data here\r\n      console.log(\"Fetching data from server...\");\r\n    };\r\n\r\n    const intervalId = setInterval(fetchData1, 2000);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   const refreshPage = () => {\r\n  //     window.location.reload();\r\n  //   };\r\n\r\n  //   const timeoutId = setTimeout(refreshPage, 30000);\r\n\r\n  //   return () => clearTimeout(timeoutId);\r\n  // }, []);\r\n\r\n  useEffect(() => {\r\n    const handleMessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      setWebSocketData(data);\r\n      // console.log('set :',data)\r\n    };\r\n\r\n    if (webSocketData) {\r\n      const ws = new WebSocket(\"ws://localhost:3100\");\r\n      ws.onmessage = handleMessage;\r\n\r\n      return () => {\r\n        ws.close();\r\n      };\r\n    }\r\n  }, [webSocketData]);\r\n  return (\r\n    <div className=\"container\">\r\n      <Monitor1 />\r\n      <br />\r\n      <Monitor2 />\r\n      <br />\r\n      <Monitor3 />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}