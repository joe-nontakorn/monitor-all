{"ast":null,"code":"import _slicedToArray from\"C:/Users/NontakornKhanaphol/Documents/Nontakorn-joe/Dev/Git-Hub/monitor-all/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable no-unused-vars */import React,{useState,useEffect}from\"react\";import Monitor1 from\"../components/monitor1\";import Monitor2 from\"../components/monitor2\";import Monitor3 from\"../components/monitor3\";import\"../assets/monitor1.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),webSocketData=_useState2[0],setWebSocketData=_useState2[1];// Connect to WebSocket server\nuseEffect(function(){var ws=new WebSocket(\"ws://localhost:\"+process.env.REACT_APP_PORT);console.log(\"WebSocket :\",ws);ws.onclose=function(){console.log(\"WebSocket connection closed\");};ws.onopen=function(){console.log(\"WebSocket connection opened\");};if(ws.readyState===WebSocket.CLOSED){console.log(\"WebSocket connection closed before it was established\");}return function(){ws.close();};},[]);useEffect(function(){var fetchData1=function fetchData1(){// Implement your logic to fetch data here\nconsole.log(\"Fetching data from server...\");};var intervalId=setInterval(fetchData1,2000);return function(){return clearInterval(intervalId);};},[]);// useEffect(() => {\n//   const refreshPage = () => {\n//     window.location.reload();\n//   };\n//   const timeoutId = setTimeout(refreshPage, 30000);\n//   return () => clearTimeout(timeoutId);\n// }, []);\nuseEffect(function(){var handleMessage=function handleMessage(event){var data=JSON.parse(event.data);setWebSocketData(data);// console.log('set :',data)\n};if(webSocketData){var ws=new WebSocket(\"ws://localhost:\"+process.env.REACT_APP_PORT);ws.onmessage=handleMessage;return function(){ws.close();};}},[webSocketData]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Monitor1,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Monitor2,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Monitor3,{})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Monitor1","Monitor2","Monitor3","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","webSocketData","setWebSocketData","ws","WebSocket","process","env","REACT_APP_PORT","console","log","onclose","onopen","readyState","CLOSED","close","fetchData1","intervalId","setInterval","clearInterval","handleMessage","event","data","JSON","parse","onmessage","className","children"],"sources":["C:/Users/NontakornKhanaphol/Documents/Nontakorn-joe/Dev/Git-Hub/monitor-all/frontend/src/pages/Home.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nimport Monitor1 from \"../components/monitor1\";\r\nimport Monitor2 from \"../components/monitor2\";\r\n\r\nimport Monitor3 from \"../components/monitor3\";\r\n\r\nimport \"../assets/monitor1.css\";\r\n\r\n\r\nfunction App() {\r\n  const [webSocketData, setWebSocketData] = useState(null);\r\n  // Connect to WebSocket server\r\n  useEffect(() => {\r\n    const ws = new WebSocket(\"ws://localhost:\" + process.env.REACT_APP_PORT);\r\n\r\n    console.log(\"WebSocket :\", ws);\r\n\r\n    ws.onclose = () => {\r\n      console.log(\"WebSocket connection closed\");\r\n    };\r\n\r\n    ws.onopen = () => {\r\n      console.log(\"WebSocket connection opened\");\r\n    };\r\n\r\n    if (ws.readyState === WebSocket.CLOSED) {\r\n      console.log(\"WebSocket connection closed before it was established\");\r\n    }\r\n\r\n    return () => {\r\n      ws.close();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchData1 = () => {\r\n      // Implement your logic to fetch data here\r\n      console.log(\"Fetching data from server...\");\r\n    };\r\n\r\n    const intervalId = setInterval(fetchData1, 2000);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   const refreshPage = () => {\r\n  //     window.location.reload();\r\n  //   };\r\n\r\n  //   const timeoutId = setTimeout(refreshPage, 30000);\r\n\r\n  //   return () => clearTimeout(timeoutId);\r\n  // }, []);\r\n\r\n  useEffect(() => {\r\n    const handleMessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      setWebSocketData(data);\r\n      // console.log('set :',data)\r\n    };\r\n\r\n    if (webSocketData) {\r\n      const ws = new WebSocket(\"ws://localhost:\" + process.env.REACT_APP_PORT);\r\n      ws.onmessage = handleMessage;\r\n\r\n      return () => {\r\n        ws.close();\r\n      };\r\n    }\r\n  }, [webSocketData]);\r\n  return (\r\n    <div className=\"container\">\r\n      <Monitor1 />\r\n      <br />\r\n      <Monitor2 />\r\n      <br />\r\n      <Monitor3 />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"0KAAA,mCAEA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAElD,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAE7C,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAE7C,MAAO,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAGhC,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,IAAAC,SAAA,CAA0CV,QAAQ,CAAC,IAAI,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjDG,aAAa,CAAAF,UAAA,IAAEG,gBAAgB,CAAAH,UAAA,IACtC;AACAV,SAAS,CAAC,UAAM,CACd,GAAM,CAAAc,EAAE,CAAG,GAAI,CAAAC,SAAS,CAAC,iBAAiB,CAAGC,OAAO,CAACC,GAAG,CAACC,cAAc,CAAC,CAExEC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEN,EAAE,CAAC,CAE9BA,EAAE,CAACO,OAAO,CAAG,UAAM,CACjBF,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC5C,CAAC,CAEDN,EAAE,CAACQ,MAAM,CAAG,UAAM,CAChBH,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC5C,CAAC,CAED,GAAIN,EAAE,CAACS,UAAU,GAAKR,SAAS,CAACS,MAAM,CAAE,CACtCL,OAAO,CAACC,GAAG,CAAC,uDAAuD,CAAC,CACtE,CAEA,MAAO,WAAM,CACXN,EAAE,CAACW,KAAK,CAAC,CAAC,CACZ,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAENzB,SAAS,CAAC,UAAM,CACd,GAAM,CAAA0B,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACvB;AACAP,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAC7C,CAAC,CAED,GAAM,CAAAO,UAAU,CAAGC,WAAW,CAACF,UAAU,CAAE,IAAI,CAAC,CAEhD,MAAO,kBAAM,CAAAG,aAAa,CAACF,UAAU,CAAC,GACxC,CAAC,CAAE,EAAE,CAAC,CAEN;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA3B,SAAS,CAAC,UAAM,CACd,GAAM,CAAA8B,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAK,CAAK,CAC/B,GAAM,CAAAC,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC,CACnCnB,gBAAgB,CAACmB,IAAI,CAAC,CACtB;AACF,CAAC,CAED,GAAIpB,aAAa,CAAE,CACjB,GAAM,CAAAE,EAAE,CAAG,GAAI,CAAAC,SAAS,CAAC,iBAAiB,CAAGC,OAAO,CAACC,GAAG,CAACC,cAAc,CAAC,CACxEJ,EAAE,CAACqB,SAAS,CAAGL,aAAa,CAE5B,MAAO,WAAM,CACXhB,EAAE,CAACW,KAAK,CAAC,CAAC,CACZ,CAAC,CACH,CACF,CAAC,CAAE,CAACb,aAAa,CAAC,CAAC,CACnB,mBACEL,KAAA,QAAK6B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBhC,IAAA,CAACJ,QAAQ,GAAE,CAAC,cACZI,IAAA,QAAK,CAAC,cACNA,IAAA,CAACH,QAAQ,GAAE,CAAC,cACZG,IAAA,QAAK,CAAC,cACNA,IAAA,CAACF,QAAQ,GAAE,CAAC,EACT,CAAC,CAEV,CAEA,cAAe,CAAAK,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}